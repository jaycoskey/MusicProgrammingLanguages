<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Music Programming Languages</title>
		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
	<meta name="author" content="Jay Coskey">
		<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/white.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement( 'link' );
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match( /print-pdf/gi ) ? 'css/pdf.css' : 'css/paper.css';
		document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>
	<script src="js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<!--
TODO:
  * Add comments in the aside sections.
  * Specifically, impact of language design decisions (esp. representation and layers)
    on supportable features and their difficulty of implementation.
  * Extract HTML styling into deck-specific CSS file.
  Euterpea:
	* Better description of Arrows & UISF and their use.
	* Haskell Music Suite
  PureData:
	* Data flow controls, events, tables, idioms
-->

<body>
<div class="reveal">
<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">

<section id="title">
		<h1>Music Programming Languages</h1>
		<h3>Creating and Analyzing Tonal Music and Soundscapes</h3>
		<p align="center">Jay Coskey</p>
		<p align="center">jay&lt;dot>coskey{at}gmail&lt;dot>com</p>
		<p align="center">2016-05-04</p>
		<b>
		<pre style="background-color: #d0ffd0; font-size: 40px;">
reveal.js tips:
  Use n or &lt;space> to advance to the next slide.
  Use p to return to the previous slide.
  Use &lt;Esc> to toggle an overview of all slides.
  Use ? to see a list of all keyboard commands.
  Use s to see the speaker notes.</pre>
		</b>
</section>

<section id="section_introduction">
	<section id="introduction">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/title">&#x25c1;</a>
			Introduction
			<a href="#/euterpea">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
			<table>
				<tr>
					<td align="left" width="800" style="vertical-align:top; font-size: 36px;">
						"To play the wrong note is insignificant; to play without passion is inexcusable."
						- Beethoven
						<p><b>Music runs deep through the human psyche:</b></p>
						<ul>
							<li> Music is universal and ancient.
							<li> The psychology of music is partially understood.
							<li> Music turns movies into blockbusters.
						</ul>
						<p><b>Traditional training vs. software</b></p>
						<ul>
							<li> Tradition: Train for 10+ years.
							<li> Faster with software?
							<li> Difference in resulting skills?
						</ul>
						<p><b>Any room for non-humans?</b></p>
						<ul>
							<li> <font color="blue">Compare within a piece or within a corpus</font>
							<li> Recognize instruments, genre, mood, etc.
							<li> Compose original music (limited success)
						</ul>
					</td>
					<td>
						<img src="img/HappyBirthdayStandard.svg"
							width="600"
							height="300"
							border="0"
							alt="Score of Happy Birthday"/>
						<br/>
						Happy Birthday:
						<a href="midi/HappyBirthdayStandard.mid">original</a> &amp;
						<a href="midi/HappyBirthdayVariation.mid">modified</a>
						<br/>
						<img src="img/HappyBirthdayVariation.svg"
							width="600"
							height="300"
							border="0"
							alt="Score of variation on Happy Birthday"/>
						<br/>
						<a href="img/InTheMoodSample.svg">In The Mood</a> (bars 5-8):
						<a href="midi/InTheMoodSampleStandard.mid">original</a> &amp;
						<a href="midi/InTheMoodSampleSwing.mid">swing</a>
					</td>
				</tr>
			</table>
		</div>
		<aside class="notes">
			<ul>
				<li> Oldest known instrument:
					<a href="http://news.nationalgeographic.com/news/2009/06/090624-bone-flute-oldest-instrument.html">flute</a>
					from 40K years ago.
				<li> Oldest recorded melody: Hurrian Hymn #6, from ~3400 years ago.
				<ul>
					<li> Melody known because string lengths were recorded
				</ul>
				<li> Some things are painstaking to master by hand,
					but easy with software.
					<ul>
						<li> Sifting through a catalog, such as all available instruments or chords.
						<li> Complex polyrhythms
					</ul>
				<li> "Compare within a piece or within a corpus"
					<ul>
						<li> Comparison can be done on performances of a specific piece over time.
						<li> Consider extending text algorithms to apply to music,
							but be sure to ask what metrics are perceptually relevant.
					</ul>
				<li> In The Mood &amp; Swing &mdash; Many MIDI sequencers have a "swing" feature that
					changes the timing of some notes based on their timing.
					This is considered an interpretation of the song, not a rewrite.
				<li> Colophon: Traditional Happy Birthday score taken from:
					<a href="https://musescore.com/user/173585/scores/166951">here</a>.
			</ul>
		</aside>
	</section>

	<section id="intro_tonal">
		<h3>Introduction &mdash; Tonal Music (*)</h3>
		<p>Examples: "Happy Birthday to You", "Greensleeves", "Yellow Submarine"</p>
		<div style="text-align: left;">
			<table>
				<tr>
					<td width="800" style="vertical-align:top; font-size: 36px;">
						<ul>
							<li> Time domain: Rhythm
							<li> Freq domain: Temperament, scales, keys, chords
							<li> Time & Freq: Melodies, chord progressions, texture
							<br/><br/>
							<li> Sheet music: Western notation &amp; lesser known
								<ul>
									<li> Scores, staves, measures, notes, accidentals....
								</ul>
							<li> Score file formats: MusicXML, LilyPond, ABC, etc.)
							<li> Sound file formats:
								<a href="https://www.cs.cmu.edu/~music/cmsip/readings/MIDI%20tutorial%20for%20programmers.html">MIDI</a>,
								wav, mp3, etc.
							<li> Scorewriters (e.g., MuseScore, Finale, Sibelius, etc.)
						</ul>
						<br/><br/>
						(*) Here the term "tonal music" is meant to refer to any music
						consisting of clearly recognizable tones.  The term does not necessarily 
						indicate the presence of a "tonal focus".  Any better terminology?
					</td>
					<td>
						<img src="https://upload.wikimedia.org/wikipedia/en/d/da/Modern_Musical_Notation.jpg"
							align="right"
							width="700"
							alt="Annotated treble clef"
						/>
						<img src="http://www.johnloomis.org/ece561/notes/piano/music_notation.jpg"
							align="right"
							width="700"
							alt="Annotated grand clef"
						/>
					</td>
				</tr>
			</table>
		</div>
		<aside class="notes">
		<ul>
			<li> Chromatic              [1,1,1,  1,1,1,  1,1,1,  1,1]
			<li> Major pentatonic       [2, 2, 3, 2, 3]       -- C-D-E-G-A-C
			<li> Minor pentatonic       [3, 2, 2, 3, 2]       -- A-C-D-E-G-A
			<li> Blues major            [2, 3, 2, 2, 3]       -- D-E-G-A-B-D
			<li> Blues minor            [3, 2, 3, 2, 2]       -- B-D-E-G-A-B
			<li> Egyptian suspended:    [2, 3, 2, 3, 2]       -- A-B-D-E-G-A
			<li> Major (=Ionian)        [2, 2, 1, 2, 2, 2, 1]
			<li> Minor (=Aeolian)       [2, 1, 2, 2, 1, 2, 2]

			<li> Ionian   (=Major)      [2, 2, 1, 2, 2, 2, 1] -- I   -- C-D-E-F-G-A-B-C
			<li> Dorian                 [2, 1, 2, 2, 2, 1, 2] -- II  -- D-E-F-G-A-B-C-D
			<li> Phrygian               [1, 2, 2, 2, 1, 2, 2] -- III -- E-F-G-A-B-C-D-E
			<li> Lydian                 [2, 2, 2, 1, 2, 2, 1] -- IV  -- F-G-A-B-C-D-E-F
			<li> Mixolydian             [2, 2, 1, 2, 2, 1, 2] -- V   -- G-A-B-C-D-E-F-G
			<li> Aeolian  (=Minor)      [2, 1, 2, 2, 1, 2, 2] -- VI  -- A-B-C-D-E-F-G-A
			<li> Locrian                [1, 2, 2, 1, 2, 2, 2] -- VII -- B-C-D-E-F-G-A-B
			
			<!-- These Indian scales are from https://github.com/cavedweller/Indian-Euterpea/ -->
			<li> Bilawal  (=Major)      [2, 2, 1, 2, 2, 2, 1]
			<li> Khamaj   (=Mixolydian) [2, 2, 1, 2, 2, 1, 2]
			<li> Kafi     (=Dorian)     [2, 1, 2, 2, 2, 1, 2]
			<li> Asavari  (=Minor)      [2, 1, 2, 2, 1, 2, 2]
			<li> Bhairavi (=Phrygian)   [1, 2, 2, 2, 1, 2, 2]
			<li> Bhairav                [1, 3, 1, 2, 1, 3, 1]
			<li> Kalyan   (=Lydian)     [2, 2, 2, 1, 2, 2, 1]
			<li> Marva                  [1, 3, 2, 1, 2, 2, 1]
			<li> Purvi                  [1, 3, 2, 1, 1, 3, 1] 
			<li> Todi                   [1, 2, 3, 1, 1, 3, 1]
		</ul>
		</aside>
	</section>
  
	<section id="intro_programersintro">
		<h3>Introduction &mdash; Programmer's Intro to Music</h3>
		<div style="text-align: left;">
			Every note is injected into the output stream &mdash; just like a debug print statement!
			<br/>
			<b>Notes</b>
			<br/>
			<ul>
				<li> A temperment is a mapping from notes to frequencies.
					(std = "equal temperment")
				<li> A pitch class (such as C) is an equivalence class of notes differing by a multiple of an octave.
				<li> A note (such as C4 = middle C) is a pair (pitch class, octave), and has a specific frequency.
				<li> Notes have multiple representations (e.g.,, C&#x266f; = D&#x266d;).  The same in some ways; different in others.
			</ul>
			<br/>
			<b>Keys</b>
			<br/>
			<ul>
				<li> A key (same as a scale) is a subset of pitch classes selected for performance or analysis.
				<ul>
					<li> Key of C Major &nbsp;&nbsp;&nbsp;= [C, D, E, F, G, A, B],
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						with semitone gap count [2, 2, 1, 2, 2, 2, 1]
					<li> Key of F# minor = [F#, G#, A, B, C#, D, E]
						with semitone gap count [2, 1, 2, 2, 1, 2, 2]
				</ul>
			</ul>
			<br/>
			<b>Chords</b>
			<br/>
			<ul>
				<li> A chord is 3+ notes played at once.  (E.g., C = C Major = {C, E, G})
				<li> Chords with names like major, minor, diminished, etc., are independent of scale.
				<ul>
					<li> Example: C4 Major seventh chord = Copies of C4 shifted up by {0, 4, 7, 11} semitones.
				</ul>
				<li> Chords with names like I-V-vi-iii-IV-I-IV-V are scale-specific.
				<ul>
					<li> The Roman # = the base note of the chord;
						Case = Major/minor
				</ul>
			</ul>
		</div>
		<aside class="notes">
			<ul>
				<li> Mention the term "enharmonic".
				<li> Mention measures (same as bars), and how accidentals apply
					throughout the rest of the measures.
				<li> Note: Roman numbers are also used to represent the ancient Greek scales.
			</ul>
		</aside>
	</section>

	<section id="intro_soundscapes">
		<h3>Introduction &mdash; Soundscapes</h3>
		<div style="text-align: left;">
			Soundscape examples: The THX Sound Effect
			("<a href="https://www.youtube.com/watch?v=M3lO9Dt3kjA">Deep Sound</a>"), or the
			<a href="https://www.youtube.com/watch?v=-0tPBQddeJs">Futurama Theme</a>
			<ul>
				<li> More amorphous than tonal music.
				<li> Often worked on by Digital Audio Workstations (DAWs).
				<li> There are DSLs for sound processing, but most DAWs are written in C++.
					<ul>
						<li> Why?  Speed.  Note that sound can be represented by arrays of numbers,
							<br/>
							and the language traits needed for numerical arrays was pretty solid by 1957,
							<br/>
							when Backus wrote Fortran.
					</ul>
			</ul>
		<br/><br/>
		Most of this talk will focus on tonal music.
		</div>
		<aside class="notes">
		<ul>
			<li> Deep sound code in SuperCollider can be found
				<a href="http://www.earslap.com/article/recreating-the-thx-deep-note.html">here</a>.
			<li> The Futurama Theme is based on a trippy 1967 song called
				<a href="https://www.youtube.com/watch?v=AOqfWj0HqNE">
				Psyché Rock
				</a> by Pierre Henry.
			<li> Mention Backus-Naur form, Fourier transforms, FFTs, and Arrows.
		</ul>
		</aside>
	</section>

	<section id="intro_useCases">
		<h3> Introduction &mdash; Other Use Cases</h3>
		<div style="text-align: left;">
		<ul>
			<li> Music Data Mining
				<ul>
					<li> Music corpora (e.g., Wikifonia), compression, storage, indexing, tagging
					<li> Assisted and autonomous composition, including stochastic systems
					<li> Generations of chords from melody (e.g., using HMMs)
					<li> Instrument, artist, genre, mood identification (using signal processing)
					<li> Measuring song similarity (e.g., copyright infringement), incl. phrase identification
					<li> Song search (incl. search by humming) &amp; recommendations, using metadata
				</ul>
			<li> Detection duplicated subexpressions and nearly-duplicated subexpressions.
				<ul>
					<li> Geralize string algorithms to music (diff, distance, etc.)
				</ul>
			<li> Physical simulation of instruments and acoustics
			<li> Visualization
		</ul>
		</div>
		<aside class="notes">
			<ul>
				<li> Microsoft SoundSmith makes use of HMMs to generate chords from melody.
					Example: 
					<a href="http://mocksession.com/2012/01/revisiting-classic-hits-by-microsoft-songsmith-roxanne-calypso-version/">
						Roxanne in Calypso</a>
					<ul>
						<li> Better than the original?  Turing test for music composition?
					</ul>
				<li> Key-finding algorithms (CBMS profile, Beyesian profile, and Krumhansl's profile)
					https://musescore.org/en/node/16444
			</ul>
		</aside>
	</section>

	<section id="intro_math">
		<h3>Introduction &mdash; Mathematical Music Theory</h3>
		<div style="text-align: left;">
		<ul>
			<li> Three-note chord transformations first formally explored by Hugo Riemann (1849-1919)
			<ul>
				<li> A <em>Schritt</em> transposes one chord (i.e., shifts its frequency).
				<li> A <em>Wechsel</em> changed a major triad into a minor triad and vice versa.
			</ul>
			<li> Later generalized to P, L, R operations in Neo-Riemannian Theory and Schenkerian analysis.
				<!-- Heinrich Schenker (1868-1935).  Schenkerian analysis is subjective -->
			<li> More recent work:
			<ul>
				<li> Transformational theory, by David Lewin, 1980s.
				<li> Generalized Contextual Groups (extension of the PLR group), by Fiore and Satyendra, 2005.
				<li> Uniform Triadic Transformations UTTs, by Julian ("Jay") Hook, 2002.
			</ul>
		</ul>
		<br/><br/>
		<b>Q:</b> How useful in addressing issues outside their scope?<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Don't forget the human listener, and don't mistake pattern for passion.
		</div>
		<aside class="notes">
			<ul>
			<li> Hugo Riemann should not be confused with the mathematician/geometer Bernhard Riemann.
			<li> In Star Trek: The Next Generation, season 3, episode 9, Wesley Crusher was studying
				"a locally Euclidian metrization of a k-fold contravariant Riemannian tensor field".
				That's a different Riemann than Hugo Riemann.
			<li> Mathematics has contributed immensely to some areas of music, such as acousitcs.
			<li> Mathematical analysis has given us two keyboards with interesting hexagonal layouts:
				<ul>
					<li> The <a href="https://en.wikipedia.org/wiki/Harmonic_table_note_layout">Harmonic table note layout</a>,
						sort of discovered by Leonhard Euler in 1739,
						similar to layouts used by the concertina and accordian,
						and used by the <a href="http://www.c-thru-music.com/cgi/?page=prod_axis-49">AXiS-49</a>
						and the AXis-64.
						<ul>
							<li> Some <a href="http://www.c-thru-music.com/cgi/?page=layout_cshapes">chord shapes</a>,
								which exist thanks to "transcription invariance". 
						</ul>
					<li> The <a href="https://en.wikipedia.org/wiki/Wicki-Hayden_note_layout">Wicki-Hayden note layout</a>,
						discovered much later (1896), and used in the Hexiano Android app.
				</ul>
			</ul>
		</aside>
	</section>

	<section id="intro_languages">
		<h3>Introduction &mdash; Music Programming Languages (MPLs)</h3>
		<div style="text-align: left; font-size: 28px;">
		<ul>
			<li> There are
				<a href="https://en.wikipedia.org/wiki/List_of_audio_programming_languages">20+</a>
				high-level MPLs.
			<li> More like
				<a href="http://nosuch.com/plum/cgi/showlist.cgi?sort=name&concise=yes">100+</a>
				if you include transcription-oriented ones (think HTML, but for music).
			<li> Soundscape DSLs came first ... but now there's a lot of support for melodic music.
			<li> Here is a short list of a few:
			<table>
			<tr>
				<td>MUSIC-N</td>
				<td>1957</td>
				<td>A very early music DSL, which gave rise to 
					<a href="http://www.musicainformatica.org/topics/music-n.php">many others</a>.
				</td>
			</tr>
			<tr>
				<td>Euterpea</td>
				<td>2012</td>
				<td>Music DSL in Haskell spanning tonal music and soundscapes, composition and analysis.
				</td>
			</tr>
			<tr>
				<td>Csound</td>
				<td>1986</td>
				<td>RTperformance, sound synth, algorithmic composition, acoustic research
				</td>
			</tr>
			<tr>
				<td>Pure Data (Pd)</td>
				<td>1990s</td>
				<td>A graphical language for RT audio+video synthesis,
					like Max/MSP in the “Patcher” family
				</td>
			</tr>
			<tr>
				<td>ChucK</td>
				<td>2003</td>
				<td>RT synthesis, live coding, pedagogy, acoustic research, algo composition
				</td>
			</tr>
			<tr>
				<td>SuperCollider (SC)</td>
				<td>1996</td>
				<td>Smalltalk-inspired language.
					RT synthesis, live coding, algorithmic composition, acoustic research
					<ul>
						<li> Overtone &mdash; A toolkit w/ a Closure API to SC and the compositional library “Leipzig”
						<li> Skoarcy  &mdash; A toolset in Skoar, a high-level music composition DSL that runs on SC
					</ul>
				</td>
			</tr>
			<tr>
				<td>Strasheela</td>
				<td>2004-2012</td>
				<td>Constraint-based composition, based on the Oz language
				</td>
			</tr>
			</table>
		</ul>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="intro_fileformats">
		<h3>Introduction &mdash; Music App File Formats</h3>
		<div style="text-align: left; font-size: 28px;">
			<ul>
				<li> MusicXML is the "universal donor" file format.
				<li> It is output by the scorewriter apps (&amp; Stresheela).
				<li> Below is a partial diagram.
			</ul>
		</div>
		<img src="img/MusicAppFileFormats.jpg"
			width="1024"
			border="1"
			alt="Music App File Formats"
			/>
		<aside class="notes">
		</aside>
	</section>
</section>

<section id="section_transcription">
	<section id="transcription">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_introduction">&#x25c1;</a>
			Song Transcription Languages
			<a href="#/section_euterpea">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
		MPLs without variables or loops can still be suitable for transcription and song DBs.
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="transcription_musicxml_lilypond">
		<h3>Transcription &mdash; MusicXML and LilyPond</h3>
		<div style="text-align: left;">
		Both of these involve the sound of a piece and the appearance of its score.
		<br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		(Content and display styling are not as separated as in today's HTML+CSS.)
			<ul>
				<li> <b>MusicXML:</b> Standard format for computer exchange of score info
					<ul>
						<li> Most music apps read and/or write MusicXML.
						<li> Significant undertaking to support (schema is ~5400 lines)
					</ul>
				<li> <b>LilyPond:</b> Popular human-writeable system for recording score info
					<ul>
						<li> Many convenience features, e.g., chord names, relative pitch
						<li> Frescobaldi = separate GUI front-end
					</ul>
				</ul>
				<pre style="font-size: 28px;">
\version "2.18.2"
\header { title = "Happy Birthday to You" }
global = { \key c \major
           \time 3/4
         }
right = \relative c'' {\global g8 g8 a4 g4        c4 b2      }
left  = \relative c   {\global r4 \chordmode{c,2} r4 &lt;d f g>2}
\score {
  \new PianoStaff \with {instrumentName = "Piano"}
  &lt;&lt;
    \new Staff = "right" \with {midiInstrument = "acoustic grand"} \right
    \new Staff = "left"  \with {midiInstrument = "acoustic grand"} {\clef bass \left}
  >>
  \layout { }
  \midi {\tempo 4=100}
}</pre>
		</div>
		<aside class="notes">
			<ul>
				<li> Note: MuseScore used to support printing to LilyPond format,
					but instead focused support on MusicXML,
					and left MusicXML-to-LilyPond support to others.
				<li> Some features in command-line not present in GUI (e.g., SVG output)
				<li> LilyPond is better than MusicXML for learning about musical structures,
					due to differences in the target audience.
			</ul>
		</aside>
	</section>

	<section id="transcription_musicxml">
		<h3>Transcription &mdash; More on MusicXML</h3>
		<div style="text-align: left;">
			<pre style="font-size: 28px;">
&lt;score-partwise>                                   &lt;== Show the 1st part, then 2nd, etc.
  &lt;work>
    &lt;work-title>Happy Birthday to You&lt;/work-title>
    &lt;/work>
  ...
  &lt;part-list>...&lt;part-name>Piano&lt;/part-name>...&lt;/part-list>
  &lt;part id="P1">
    &lt;measure number="1" width="273.03">
      ...
      &lt;note default-x="78.29" default-y="-30.00">  &lt;== Just showing the first note here
        &lt;pitch>
          &lt;step>G&lt;/step>
          &lt;octave>4&lt;/octave>
          &lt;/pitch>
        &lt;duration>1&lt;/duration>
        &lt;voice>1&lt;/voice>
        &lt;type>eighth&lt;/type>
        &lt;stem>up&lt;/stem>
        &lt;staff>1&lt;/staff>
        &lt;beam number="1">begin&lt;/beam>
        &lt;/note>
        ...
      &lt;/measure>
     ...
    &lt;/part>
  &lt;/score-partwise></pre>
		</div>
	</section>

	<section id="transcription_lilypond">
		<h3>Transcription &mdash; More on LilyPond</h3>
		<div style="text-align: left;">
			<p>LilyPond is useful for printing beautiful scores.</p>
			<pre style="font-size: 32px;">
\header {
    title = "Mary Had a Little Lamb"
}
song = \relative c' {
    \clef treble
    \key c \major
    \time 4/4
    e4 d c d e e e2 d4 d d2 e4 e e2
    e4 d c d e e e c d d e d c2 r2
}
\score { \new Staff \song }</pre>
			<ul>
				<li> Notes can be specified with relative or absolute pitches.
					<ul>
						<li> (In chordmode, absolute pitches only)
					</ul>
				<li> LilyPond supports contemporary, antique, and obscure formats.
				<li> If you think something can't be done...
					<br/>
					you probably haven't read enough of the documentation.
			</ul>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="transcription_abc">
		<h3>Transcription &mdash; ABC</h3>
		<div style="text-align: left;">
			<ul>
				<li> <b>Brief:</b> ABC notation (v2.1 - Dec 2011) is concise, popular, and well-supported.
				<li> See
					<a href="http://abcnotation.com">abcnotation.com</a>
					for apps that support this format.
				<li> See this 
					<a href="http://www.stephenmerrony.co.uk/uploads/ABCquickRefv0_6.pdf">Quick Reference</a>
					by Stephen Merrony.
				<li> Don't be fooled by the simplicity of the format:
					countless transcription details are supported.
			</ul>
			<pre style="font-size: 32px; white-space: pre-line;">
				T:Mary had a little lamb
				M:C		% meter
				L:1/4   % basic note length
				K:F		% key
				AGFG|AAA2|GGG2|AAA2|
				AGFG|AAAA|GGAG|F4|]
			</pre>
			<table align="left">
				<tr>
					<td> "^" / "_"</td>
					<td> sharp / flat (moves note up/down one semitone) </td>
				</tr>
				<tr>
					<td> "&lt;apostrophe>" / "&lt;comma>"</td>
					<td> increments / decrements octave for given note</td>
				</tr>
				<tr>
					<td> "|" (pipe) </td>
					<td> Bar line.  (Lots of variations available.)</td>
				</tr>
				<tr>
					<td> "[", "]"</td>
					<td> Grouping of notes in chord </td>
				</tr>
				<tr>
					<td> A2, A3, A4, A5, A6, etc.</td>
					<td> Multiples of the default length of an 'A' note;
					</td>
				</tr>
				<tr>
					<td> A/2, A/3, A/4, A/5, A/6, etc.</td>
					<td> Fractions of the default length of an 'A' note;
					</td>
				</tr>
			</table>
		</div>
		<aside class="notes">
			<p>Not listed in this section:
			<ul>
				<li> MusicTeX is also available to add scores into TeX documents.
			</ul>
		</aside>
	</section>

	<section id="transcription_alda">
		<h3>Transcription &mdash; Alda</h3>
		<div style="text-align: left;">
			<b>Brief:</b> Alda is a Clojure-based tonal music DSL with a notation similar to that of ABC.
		    <ul>
				<li> Alda (inspired by LilyPond and Music Macro Language) tries to find
					the "sweet spot" between simple/intuitive syntax and depth of features.
					It's implemented in Clojure, and emits a Clojure DSL,
					which is exposed as a library.
					<pre style="font-size: 32px; white-space: pre-line;">
					piano: o3
					g8 a b > c d e f+ g | a b > c d e f+ g4
					g8 f+ e d c &lt; b a g | f+ e d c &lt; b a g4
					&lt;&lt; g1/>g/>g/b/>d/g</pre>
			</ul>
			<table align="left">
				<tr>
					<td> "+" / "-"</td>
					<td> sharp / flat (moves note up/down one semitone) </td>
				</tr>
				<tr>
					<td> o</td>
					<td> set default octave</td>
				</tr>
				<tr>
				<tr>
					<td> ">" / "&lt;"</td>
					<td> increment / decrement default octave</td>
				</tr>
				<tr>
					<td> "|" (pipe) </td>
					<td> For readability only; ignored by the compiler </td>
				</tr>
				<tr>
					<td> "/" </td>
					<td> Separator for notes in chord </td>
				</tr>
				<tr>
					<td> 1, 2, 4, etc.</td>
					<td> whole, 1/2, 1/4, etc. (as in LilyPond)</td>
				</tr>
				<tr>
					<td> &lt;periods> </td>
					<td> Dotted notes (as in LilyPond) </td>
				</tr>
			</table>
		</div>
		<aside class="notes">
			<ul>
				<li> Keeping running tabs on the current octave makes
					it more difficult to time-reverse a piece of music.
				<li> Why do you think the measure markers are ignored by the compiler?
			</ul>
		</aside>
	</section>
</section>

<section id="section_euterpea">
	<section id="euterpea">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_transcription">&#x25c1;</a>
			Euterpea (since 2012)
			<a href="#/section_csound">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
		<b>Brief:</b> Euterpea (v2) is a music DSL embedded in Haskell.  It evolved from earlier HasSound/Haskore.
		<br/><br/>
		<ul>
			<li> First up because:
				<ul>
					<li> (a) Supports both tonal and full-spectrum music
					<li> (b) Core similicity &rArr; Better focus on the domain of music itself.
				</ul>
			<li> Euterpea & lib/PDF "The Haskell School of Music" (HSoM) was started by the late Paul Hudak.
			<li> Now maintained by Quick &amp; Winograd-Cort
		</ul>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="euterpea_geting_started">
		<h2>Euterpea &mdash; Getting Started</h2>
		<div style="text-align: left;">
		<h4>Haskell School of Music</h4>
		<ul>
			<li> Download the PDF "Haskell School of Music" (HSoM.pdf).  (Decent into to Haskell.)
			<li> Can be thought of as a sequel to Paul Hudak's "The Haskell School of Expression" (2000).
		</ul>
		<br><br>
		<h4>Installation</h4>
		<ul>
			<li>Read installation instructions at  <a href="http://www.euterpea.com/download-and-installation/">http://www.euterpea.com/download-and-installation/</a>
			<li>Install the 32-bit version of Haskell Platform.  (Sound doesn't work w/ 64-bit version.)
			<li>Install Euterpea2 and the Haskell School of Music (HSoM) from github.
			<li>Test installation ("MUI" = "Musical User Interface)
				<pre style="font-size: 32px; white-space: pre-line;">
					% ghci
					ghci> import Euterpea
					ghci> play $ c 4 qn  -- Play a quarter note, with sensible defaults
					ghci> import HSoM
					ghci> :load  HSoM.Examples.MUIExamples2
					ghci> import HSoM.Examples.MUIExamples2
					ghci> bifurcate     -- GUI app/test that lives in MUIExamples2
				</pre>
		</ul>
		</div>
		<aside class="notes">
			Euterpea is currently maintained by Donya Quick and Dan Winograd-Cort.
		</aside>
	</section>

	<section id="euterpea_model">
		<h3>Euterpea &mdash; Modeling (Tonal) Music</h3>
		<div style="text-align: left;">
			At the heart of Euterpea's representation of music is the following Primitive:
			<pre style="font-size: 32px;">
		data Primitive = Note Dur Pitch
			       | Rest Dur</pre>
			Type "Music" consists of Primitive events:
			glued together
			<ul>
				<li> sequentially (w/ operator :+:)
				<li> in parallel (with operator :=:), or
				<li> tagged with contextual control information.
			</ul>
			<pre style="font-size: 32px;">
data Music a = Prim (Primitive a)       -- primitive value
	     | Music a :+: Music a      -- sequential composition
	     | Music a :=: Music a      -- parallel composition
	     | Modify Control (Music a) -- modifier</pre>
		So the different constructors of Music are Prim, (:+:), (:=:),
		and Modify. 
			<br/>
			The function "play" uses defaults to perform conversions:
			<pre style="font-size: 32px; white-space: pre-line;">
				Music ==> to Music1 (non-parameterized) ==> [MEvent] ==> [MidiMessage]
			</pre>
			The final MidiMessage list is sent to a MIDI output.
		</div>
		<aside class="notes">
			<ul>
				<li> The sequence of transformations at the end of this slide
					is buried within many function calls.
			</ul>
		</aside>
	</section>

	<section id="euterpea_example">
	<h3>Euterpea &mdash; A short example</h3>
		<div style="text-align: left;">
			To play one or a few simple notes:
			<pre style="font-size: 32px; white-space: pre-line;">
				import Euterpea
				c :: Octave -> Dur -> Music Pitch
				play $ c 4 qn
				mapM (\octave -> play $ c octave qn) [0 .. 8]  -- Play C notes.
			</pre>
			Here is a slightly more complex: a basic version of Frère Jacques (from HSoM).

			<pre style="font-size: 32px; white-space: pre-line;">
			twice m = m :+: m
			fj1, fj2, fj3, fj4, fjNotes, fj :: Music Pitch
			fj1 = c 4 qn :+: d 4 qn :+: e 4 qn :+: c 4 qn
			fj2 = e 4 qn :+: f 4 qn :+: g 4 hn
			fj3 = g 4 en :+: a 4 en :+: g 4 en :+: f 4 en :+: e 4 qn :+: c 4 qn
			fj4 = c 4 qn :+: g 3 qn :+: c 4 hn
			fjNotes = twice fj1 :+: twice fj2 :+: twice fj3 :+: twice fj4
			fj = Modify (Tempo 4) $ Modify (Instrument AcousticGrandPiano) fjNotes

			play :: Performable a => Music a -> IO ()
			play fj
			</pre>
		</div>
		<aside class="notes">
			<ul>
				<li> In Haskell, technically every function is a function of one argument,
					including here the names of notes.  So the funciton c takes an Octave,
					and returns another function that takes a Duration and returns a Music Pitch.
				<li> Converting Frère Jacques to a round is left as an exercise.
			</ul>
		</aside>
	</section>

	<section id="euterpea_percussion">
	<h3>Euterpea &mdash; Percussion</h3>
		<div style="text-align: left;">
			Here is percussion staff notation for the
			"<a href="http://en.wikipedia.org/wiki/Amen_break">Amen Break</a>"
			(<a href="https://upload.wikimedia.org/wikipedia/en/8/80/The_Amen_Break%2C_in_context.ogg">
			play</a>),
			a famous drum solo.
			<div style="text-align: center;">
			<!-- Image below derived from:
				src="https://upload.wikimedia.org/wikipedia/commons/7/7e/Amen_break_notation.png"
			-->
			<img 
				src="img/Amen_break_notation.jpg"
				align="center"
				border="1"
				width="50%"
				alt="Percussion staff for the Amen Break"/>
			<font style="font-size:20px">Wikipedia (<font color="#xff0000">modified</font>)</font>
			</div>
			<pre style="font-size: 28px; font-color: #xff0000;
						-webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;">
data Beat = Beat { bDur :: Dur, bHeard :: Int, bAcc :: Int }
type Beats = [Beat]
infixr 6 .+.
infixr 7 .*.
(.*.) n   bs  = concat $ replicate n bs
(.+.) bs1 bs2 = bs1 ++ bs2

beats2m :: PercussionSound -> Beats -> Music Pitch
beats2m percInstr [] = rest 0
beats2m percInstr (Beat { bDur=d, bHeard=h, bAcc=a } : beats)
    = m0 :+: (beats2m percInstr beats)
        where m  = Modify (Instrument Percussion) $ perc percInstr d
              m0 = case (h,a) of
                        (0, _) -> rest d  -- Silent "beat"
                        (1, 0) -> m       -- Unaccented beat
                        (1, 1) -> Modify (Phrase [Dyn (Accent 1.5)]) m
instrB = AcousticBassDrum
mkBeat d h a = [Beat { bDur = d, bHeard = h, bAcc = a }]
qns = mkBeat qn 0 0; ens =  mkBeat en 0 0; enb = mkBeat en 1 0; snb = mkBeat sn 1 0</pre>
<font color="red"><pre style="font-size: 28px; font-color: #xff0000;
						-webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;">
amen1b = beats2m instrB $ 2.*.enb .+. qns .+. ens .+. 2.*.snb .+. qns</pre></font>
		</div>
		<aside class="notes">
			<ul>
			<li> Percussion staff notation works differently in scores, in MIDI, &amp; Euterpea.
				<ul>
				<li> The vertical placement of notes is used to denote instrument, rather than pitch.
				</ul>
			<li> Another notation, drum tablature, is sometimes used:
				<pre style="font-size: 28px; white-space: pre-line;">
					C |----------------|----------------|----------------|----------X-----|
					R |x-x-x-x-x-x-x-x-|x-x-x-x-x-x-x-x-|x-x-x-x-x-X-x-x-|x-x-x-x-x---x-x-|
					S |----o--o-o--o--o|----o--o-o--o--o|----o--o-o----o-|-o--o--o-o----o-|
					B |o-o-------oo----|o-o-------oo----|o-o-------o-----|--oo------o-----|
					->|1 + 2 + 3 + 4 + |1 + 2 + 3 + 4 + |1 + 2 + 3 + 4 + |1 + 2 + 3 + 4 + |</pre>
			<li> If polyrhythms are to be added somewhere, here's a
				<a href="https://ask.audio/articles/music-theory-4-jazz-techniques-for-electronic-composers/p3#article">
					nice image
				</a>
		    </ul>
		</aside>
	</section>

	<section id="euterpea_performance">
		<h3>Euterpea &mdash; Creating a Performance</h3>
		<div style="text-align: left;">
			We can replace play with the more explicit version that has more args:
			<ul>
				<li> The "data"
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&mdash;
					Context
				<li> The "strategy"
					&mdash;
					PMap ("Player Map")
					&mdash;
					which Player to use for which instrument
			</ul>
			<pre style="font-size: 32px;">
playA :: (ToMusic1 a, Control.DeepSeq.NFData a)
		=> PMap Note1 -> Context Note1 -> Music a -> IO()</pre>
			The Player determines how to interpret
			<br/>
			<ul>
				<li> note attributes (e.g., Pizzicato)
				<li> and phrase attributes (e.g., Crescendo)
			</ul>
			<pre style="font-size: 32px;">
data Context a = Context { cTime :: PTime,          cPlayer :: Player a
			 , cInst :: InstrumentName, cDur    :: DurT
			 , cPch  :: AbsPitch,       cVol    :: Volume
			 , cKey  :: (PitchClass, Mode)
			 }
data Player a = MkPlayer { pName        :: PlayerName   -- ID for selection
			 , playNote     :: NoteFun a    -- Interp. notes
			 , interpPhrase :: PhraseFun a  -- Interp. phrases
			 -- , notatePlayer :: NotateFun -- Removed.
			 }</pre>
		<aside class="notes">
			<pre style="font-size: 32px; white-space: pre-line;">
			type Performance = [ Event ]
			data MEvent = MEvent { eTime, eInstr, ePitch, eDur, eVol, eParams :: [ Double ] }
							deriving (Show, Eq, Ord)
			perform :: PMap a -> Context a -> Music a -> Performance  -- See p. 138 of HSoM
			type NoteFun a = Context a -> Dur -> a -> Performance
			type PhraseFun a = PMap a -> Context a -> [PhraseAttribute] -> Music a -> (Performance, DurT)
			type NotateFun a = ()
			The PMap is a map from PlayerName (String) to Player (a means of rendering sound & score).
			type PMap a = PlayerName -> Player a
			There is a similar map for channels:
			type ChannelMap = [ (InstrumentName, Channel) ]
			type ChannelMapFun = InstrumentName -> ChannelMap -> (Channel, ChannelMap)</pre>
		</aside>
	</section>

	<section id="euterpea_phraseAttribute">
		<h3>Euterpea &mdash; A Simple Phrase Attribute</h3>
		<div style="text-align: left;">
			How to implement a phrase attribute like Crescendo,
			that increases the volume of notes?
			<br/>
			We would change the volume of each note (MEvent) in a Performance.
			<pre style="font-size: 32px;">
myPasHandler :: PhraseAttribute -> Performance -> Performance
myPasHandler (Dyn (Crescendo x)) pf = boostVolsBy x pf
    where t0 = eTime (head performance)
	perfDur :: Dur
	perfDur =  sum $ map eDur performance
	propTime :: PTime -> Rational
	propTime t = (t - t0) / perfDur
	propVolDelta :: PTime -> Rational
	propVolDelta t = x * (propTime t)
	newVol t v = round((1 + (propVolDelta t)) * (fromIntegral v))
	boostMEventVol (e@MEvent {eTime = t, eVol = v})
		= e { eVol = trace ("Vol=" ++ show (newVol t v))
				   (newVol t v)
		}
	boostVolsBy :: Rational -> [MEvent] -> [MEvent]
	boostVolsBy x pf = map boostMEventVol pf

myPasHandler pa                    pf = defPasHandler pa pf</pre>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="euterpea_ragtimify">
		<h3>Euterpea &mdash; The "Ragtimify" Use Case</h3>
		<div style="text-align: left;">
			Ragtime pieces (think of "The Entertainer"
			<a href="https://www.youtube.com/watch?v=uaU4Yg6IffQ">[play]</a>)
			often have a baseline that alternates between chords and notes or pairs.
			This gives the ragtime piece it's characteristic pulse.
			<div style="text-align: center;">
				<img src="http://ragpiano.com/misc/somesyn.gif"
					align="center"
					border="1"
					width="75%"
					alt="Score of ragtime music sample"/>
			</div>
			Suppose you want a Player to output a ragtime version of music
			with baseline chords.
			<br/>
			Or you want to write a function that transforms a Music arg
			into a ragtime version.
			<br/>
			You might hope to first find the Chord objects by....
			<br/><br/>
			But if your music is written in Euterpea, there are no "Chord objects"!
			Because of how Music is defined, the chords are not explicitly recorded.
			Instead, they're recorded as something like:
			<pre style="font-size: 32px;">
		(note1 :=: (note2 :=: (note3 :=: note4)))</pre>
			So ... Simplicity of internal representation chosen
			<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&rArr; More costly extraction of structure from the piece later. 
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="euterpea_soundscape">
		<h3>Euterpea &mdash; Creating Custom Sounds</h3>
		<div style="text-align: left;">
		Advanced: Euterpea also supports more general sound creation using Arrows
		(see Control.Arrow).
		<pre style="font-size: 32px;">
(>>>)          :: SF a b -> SF b c -> SF a c -- Left-to-right composition
(&lt;&lt;&lt;) :: SF b c -> SF a b -> SF a c -- Right-to-left composition
z &lt;- sigFunc -&lt; (x, y)		    -- Signal function</pre>
		<pre style="font-size: 32px;">
{-# LANGUAGE Arrows #-}
module Euterpea.Examples.SigFuns where
import Euterpea
import Control.Arrow ((>>>),(&lt;&lt;&lt;),arr)

s4 :: Clock c => SigFun c () Double
s4 = proc () -> do
       f0  &lt;- oscFixed 440   -&lt; ()
       f1  &lt;- oscFixed 880   -&lt; ()
       f2  &lt;- oscFixed 1320  -&lt; ()
       outA -&lt; (f0 + 0.5*f1 + 0.33*f2) / 1.83

vibrato :: Clock c => Double -> Double -> SigFun c Double Double
vibrato vfrq dep = proc afrq -> do
  vib  &lt;- osc tab1  0 -&lt; vfrq
  aud  &lt;- osc tab2  0 -&lt; afrq + vib * dep
  outA -&lt; aud

-- type  a b = SigFun AudRate a b
s5 :: AudSF () Double
s5 = constA 1000 >>> vibrato 5 20</pre>
		</div>
		<aside class="notes">
		<ul>
			<li> Arrows are like Monads, but they parameterize both input and (output) value.
			<li> proc is used to define an Arrow just like lambda defines a function.
			<li> "do" within an Arrow provides Arrow-related syntactic sugar,
				just like "do" within a Monad provides Monad-related syntactic sugar.
			<li> The operator (-&lt;) can be pronounced "(first order) arrow tail".
			<li> There's another operator, (-&lt;&lt;), or "(higher order) arrow tail".
		</ul>
		</aside>
	</section>

	<section id="euterpea_instruments1">
		<h3>Euterpea &mdash; Custom Instruments (1/2)</h3>
		<div style="text-align: left;">
			<pre style="font-size: 32px;">
data Instrument Name = AcousticGrandPiano -- See p. 35 of HSoM
		     | BrightAcousticPiano
		     | ...
		     | Custom String
		     deriving (Show, Eq, Ord)</pre>
			This can be used as follows (see Chapter 19 of HSoM)
			<pre style="font-size: 32px; white-space: pre-line;">
    myMandolinName :: InstrumentName -- Or myFlugelhorn or myUkulele
    myMandolinName = Custom "My Mandolin"
    type Instr a = Dur -> AbsPitch -> Volume -> [Double] -> a</pre>
			This is commonly used with the type variable a being
			"<font color="#0000ff">Instr (AudSF () Double)</font>".
			The list of parameters ([Double], above) are handled as determined by the instrument designer.
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="euterpea_instruments2">
		<h3>Euterpea &mdash; Custom Instruments (2/2)</h3>
		<div style="text-align: left;">
			Let's use the vibrato function defined earlier as a starting point.  (See Fig. 19.4 in HSoM.)
			<ul>
				<li>Step #1: Convert a signal function into an instance of type Instr.
					For example, using <em>vibrato</em>:
					<pre style="font-size: 28px;">
myMandolin :: Instr (AudSF () Double)  -- Monaural: Could choose stereo instead.
myMandolin dur ap vol [vfrq, dep] =
    proc () -> do
	vib &lt;- osc tab1 () -&lt; vfrq
	aud &lt;- osc tab2 () -&lt; apToHz ap + vib * dep
	outA -&lt; aud		</pre>
				<li>Step #2: Connect the instrument name to the instrument definition.
					<pre style="font-size: 28px; white-space: pre-line;">
					type InstrMap a = [(InstrumentName, Instr a)]
					myInstrMap :: InstrMap (AudSF () Double)
					myInstrMap = [(myMandolinName, myMandolin)]
					</pre>
				<li>Step #3: Use the Euterpea function <em>renderSF</em>
					<pre style="font-size: 28px;">
renderSF :: (Performable a, AudioSample b, Clock c)
    => Music a -> InstrMap (SigFun p () b) -> (Double, SigFun p () b)</pre>
				<li>Finally:
					<pre style="font-size: 28px; white-space: pre-line;">
					mandolinMelody = instrument myMandolinName $ <font color="#0000ff" weight="bold">...music...</font>
					(dur, sigFun) = renderSF mandolinMelody myInstrMap
					main = outFile "mandolinMelody.wav" dur sigFun
					</pre>
			</ul>
		</div>
		<aside class="notes">
			<ul>
			<li> From Euterpea/IO/Audio/Types.hs:
				<ul>
				<li> type Stereo p = Signal p () (Double, Double)
				</ul>
			<li> From Euterpea.Examples.MusicToSignal:
				<ul>
				<li> reed :: Instr (Stereo AudRate)
				</ul>
			<li> From Euterpea.IO.Audio.Render:
				<ul>
				<li> type Instr a = Dur -> AbsPitch -> Volume -> [Double] -> a
				</ul>
			</ul>
		</aside>
	</section>

	<section id="euterpea_codingStandards">
	<h3>Euterpea &mdash; Programmer's Intro to Music Programming</h3>
		<div style="text-align: left;">
		<ol>
		<li> <b>Represent compositions in terms of smaller sub-compositions ("pieces"):</b>
			<ul>
				<li> Use names to reflect structure (e.g., sonata_violin_1_4).
				<li> Consider putting measures on separate lines.
				<li> Identify/extract duplicate subexpressions &amp; other structures.
				<li> Use functions to extract commonality from near-duplicate subexpressions.
			</ul>
		<br/>
		<li> <b>Perform validation tests:</b>
			<ul>
				<li> Validate that all expected instruments are present.
				<li> Validate that all pieces have the expected duration.
			</ul>
		<br/>
		<li> <b>Perform live testing:</b>
			<ul>
				<li> Listening to compositions will help detect some issues.
				<li> Play melodies in parallel to detect differences/intervals.
			</ul>
		<br/>
		<li> <b>Derive metrics to be used in testing:</b>
			<ul>
				<li> Just as images can be associated with color histograms,
					<br/>
					music slices can be associated (via FFTs) with frequency histograms.
			</ul>
		</ol>
		</div>
		<aside class="notes">
			<ul>
				<li> Playing melodies in parallel &rArr; Discuss text algorithms, XOR impl. issues, etc.
				<li> Consider using lyrics in identifier names.
			</ul>
		</aside>
	</section>

	<section id="euterpea_moreinfo">
		<h3>Euterpea &mdash; More Info</h3>
		<div style="text-align: left;">
		<ul>
			<li> The HSoM introduces
				Arrow-based Functional Reactive Programming (FRP) via FRP.UISF.
			<ul>
				<li> Good place to learn more on UISF:
					Daniel Winograd-Cort's
					<a href="https://github.com/dwincort/UISF/tree/master/FRP/UISF/Examples">UISF Examples</a>
					on github.
				<li> UISF is not as popular/mature as some other Haskell FRP systems.
					such as Yampa, Netwire, Reflex, Sodium, and Reactive Banana.
					A good discussion of these can be found
					<a href="https://www.reddit.com/r/haskell/comments/3fr5ij/frp_systems_discussion/">here</a>.
			</ul>
			<li> Many other MPLs have Haskell interfaces,
				allowing communication between them &amp; Euterpea.
			<li> <a href="http://music-suite.github.io/docs/api/">
				Haskell Music Suite</a>:
				a slick music DSL inspired by Euterpea and others.
				<ul>
					<li> Focused on score representation
					<li> Does not support soundscapes
					<li> Has a "back end" that supports printing tonal music via LilyPond
					<li> Also has a type called Music, but it's far more complex than Euterpea's.
				</ul>
			<li> <a href="http://www.link.cs.cmu.edu/melisma/">The Melisma Music Analyzer</a>
				is a music analysis app written in Euterpea.
			<li> <a href="http://donyaquick.com/kulitta/">Kulitta</a>
				is a modular Euterpea-based music composition framework by Donya Quick.<br/>
				It combines generative grammars, theories of harmony (chord spaces),<br/>
				and available musical phrases to create a composition.
			<li> Soundscape time-slices can be converted into frequency histograms
				via FFTs (Fast Fourier Transforms).
				The HSoM touches on this in Chapter 20, Spectrum Analysis.
				A finished application might be a better reference,
					to avoid a thicket of module dependencies.
		</ul>
		</div>
		<aside class="notes">
			Haskell Music Suite's definition of Music a:
			<br/>
			<pre style="font-size: 32px;">
type StandardNote =
  (PartT Part
    (ColorT
      (TextT
        (TremoloT
          (HarmonicT
            (SlideT
              (ArticulationT Articulation
                (DynamicT Dynamics
                  [TieT
                    Pitch]))))))))

type Music = Score StandardNote</pre>
			<br/>
			<ul>
				<li> <a href="http://www.donyaquick.com/img/kulitta_diagram.png">High-level architecture</a>
					of Kulitta
			</ul>
		</aside>
	</section>
</section>

<section id="section_csound">
	<section id="csound">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_euterpea">&#x25c1;</a>
			Csound (since 1986)
			<a href="#/section_chuck">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
			<b>Brief:</b> An opcode-based language (think assembler), based on soundwave generation.
			<br/><br/>
			Users can:
			<ul>
				<li> Define customized instruments
				<ul>
					<li> The instruments are basically waveforms, but can be custimized to sound like actual instruments.
				</ul>
				<li> Combine them to create music
			</ul>
			<br/><br/>
			<a href="http://blue.kunstmusik.com/">Blue</a>
				is a composition environment for Csound.
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="csound_example">
		<h3>Csound &mdash; A Simple Example</h3>
		<div style="text-align: left;">
		Here is a simple example from the documentation:
		<pre style="font-size: 32px;">
&lt;CsoundSynthesizer>
&lt;CsOptions>
&lt;/CsOptions>
&lt;CsInstruments>
sr = 44100		&lt;== Sample rate (Hz) for audio signals & vars
ksmps = 128		&lt;== Sample rate per control-block, e.g., mouse
nchnls = 2		&lt;== # of audio channels.  Two for stereo.
0dbfs = 1		&lt;== Max output in dBs before clipping

instr 2
kFreq expon 100, 5, 1000    ; kFreq set to the output of expon(ential)
aOut  oscili 0.2, kFreq, 1  ; aOut set to the output of 'oscil' 
	outvalue "freqsweep", kFreq
	outs aOut, aOut
endin
&lt;/CsInstruments>
&lt;CsScore>
f 1 0 1024 10 1	; this function table contains the sine information
i 2 0 5 	; the instrument is called at t=0 &amp; plays for 5 sec.
e
&lt;/CsScore>
&lt;/CsoundSynthesizer></pre>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="csound_language">
		<h3>Csound &mdash; Other Language Features</h3>
		<div style="text-align: left;">
			<ul>
				<li> Instrument parameters: All instruments have 3 fixed params:
					<ul>
						<li> Instrument #
						<li> Start time
						<li> Duration
					</ul>
					<pre style="font-size: 32px;" width="100%;">
instr 1			   &lt;== This takes 2 extra params: amp &amp; freq.
aSine poscil3 p4, p5, 1;   &lt;== p4 = 4th param; p5 = 5th param
	outs aSine, aSine  &lt;== One output for each channel
endin										</pre>
				<li> Similarly, function tables can also take extra params.
				<li> We've got if statements and loops!
					<pre style="font-size: 32px;">
instr 1
iGreetingCount = 0
    loop:		   &lt;== Any label can be used here
	iGreetingCount = iGreetingCount + 1
	prints "Hello world #%i\n", iGreetingCount
    if (iGreetingCount &lt; 5) igoto loop
endin</pre>
			</ul>
		</div>
		<aside class="notes">
		</aside>
	</section>
</section>

<section id="section_chuck">
	<section id="chuck_hellosinewave">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_csound">&#x25c1;</a>
			ChucK (since 2003)
			<a href="#/section_puredata">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
			<b>Brief:</b> ChucK is a strongly-, statically-typed OO language that
				creates waveforms with strict timing.
			<br/><br/>
			Here is a script that plays a 220 Hz sine wave for 5 seconds.
			<pre style="font-size: 32px;">
	&lt;&lt;&lt; "Hello, sine wave" >>>
	SinOsc s => dac;
	0.6 => s.gain;
	220 => s.freq;
	5::second => now;</pre>
			In this script:
			<ul>
				<li> &lt;&lt;&lt;Stuff inside the angled quotes>>> is  evaluated and printed.
				<li> The Sinusoidal Oscillator type, SinOsc, has "gain" (i.e., volume) and "freq" (i.e., pitch) properties.
				<li> "=>" is called the "chuck" operator: it "throws"/"chucks" a value or stream to its destination.
				<li> Sending a duration to "now" causes time to advance. 
					<ul>
						<li> Streams in scope output their signals to the dac to create sound.
					</ul>
			</ul>
		</div>
		<aside class="notes">
			<ul>
				<li> At one point, there was a Coursera course on ChucK, "ChucK 101".  It's now 404.
			</ul>
		</aside>
	</section>

	<section id="chuck_echo">
		<h3>ChucK &mdash; Echo Script</h3>
		<div style="text-align: left;">
		Here is a simple "echo" script that reads from a microphone,
			then echoes a slightly delayed and muted version to the speakers.  It uses a built-in Audio-to-Digital Converter (ADC) called adc. 
		<pre style="font-size: 32px;">
	// Feedback setup
	adc => Gain g => dac;
	g => Gain feedback => DelayL delay => g;

	0.75::second => delay.max => delay.delay;
	0.5 => feedback.gain;  // Note: gain &lt; 1.
	0.75 => delay.gain;
	while (true) 1::second => now;
		</pre>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="chuck_instrument">
		<h3>ChucK &mdash; Instrument Modeling</h3>
		<div style="text-align: left;">
			Here's a simplified version of a plucked string, modified from the book
			<a href="http://www.amazon.com/Programming-Musicians-Digital-Artists-Creating/dp/1617291706/">
				Programming for Musicians and Digital Arists: Creating music with ChucK
			</a> (2015).
			<pre style="font-size: 32px;">
	// Karplus-Strong model of a plucked string
	Impulse imp => Delay plucked => dac;
	plucked => plucked;   // Feedback 
	441.0::samp => plucked.delay; // Sample rate
	0.98 => plucked.gain; // Round-trip gain &lt; 1
	1.0 => imp.next;      // "Pluck" impulse
	5.0::second => now;   // The string resonates</pre>
			<ul>
				<li> Note the feedback connecting "plucked" to itself.
					<ul>
						<li> The action of a plucked string depends
							on its action at previous moments.
					</ul>
			</ul>
		</div>
		<aside class="notes">
			Instrument modeling was pulled into ChucK from the earlier
			<a href="https://ccrma.stanford.edu/software/stk/">Synthesis ToolKit in C++</a>.
		</aside>
	</section>

	<section id="chuck_moreinfo">
		<h3>ChucK &mdash; More Info</h3>
		<div style="text-align: left;">
		<ul>
			<li> A 3-note chord can be represented by an array of SinOsc objects: SinOsc chord[3];
			<li> ChucK uses the whimsical terms "shreds" and "spork" for processes and forks.
			<ul>
				<li> Scripted and compiled plug-ins are called Chugens and ChuGins.
			</ul>
			<li> Different instruments go into different "shreds", &amp; can communicate using Events.
			<li> To emulate rests, have time advance in a static scope without audio streams.
				<ul>
					<li> Notes placed in function calls are in a different static scope.
				</ul>
			<li> For stereo, dac has fields called <tt>.left</tt> and <tt>.right</tt>.
				<ul>
					<li> For quadraphonic sound, use the <tt>.chan</tt> field.
				</ul>
			<li> ChucK can run in "live performance mode", where a script is updated while running.
		</ul>
		</div>
		<aside class="notes">
			<ul>
				<li> Glossed over in the slide: Notes and rests do not play equal roles.
					Rests are created not by the absence of notes.
				<li> Musical notes are be called by their MIDI Note Numbers, &amp; converted to freqs by Std.mtof().
			</ul>
		</aside>
	</section>
</section>

<section id="section_supercollider">
	<section id="supercollider">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_chuck">&#x25c1;</a>
			SuperCollider (SC) (since 1996)
			<a href="#/section_puredata">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
			<b>Brief:</b> SC is a Smalltalk-like OO language that supports live performances.
			<br/><br/>
			<ul>
				<li> Named in 1993 after the cancelled Superconducting Super Collider project
				<li> Supports plug-ins, MIDI data, live coding, and communication with external devices.
			</ul>
			<pre style="font-size: 32px;">
	15.squared           // Evaluates to 225.
	[45, 13, 10].sort    // Evaluates to [10, 13, 45]
	5 pow: 8             // Same as 5.pow(8) 
	10.do({ "Hello world".postln })    // Writes to the "Post" pane.</pre>
		Caution: Binary operators are evaluated in left-to-right order,
			so 1 + 3 * 5 yields 20, not 16.
			<br/><br/>
			Here is a brief code snippet that prints out the value of 5! ("five factorial"):
			<pre style="font-size: 32px;">
	var factorial = { | n |
		var result = 1;
		n do: { | i | result = result * (i + 1) };
		result;
	};
	factorial.(5).postln;</pre>
		</div>
		<aside class="notes">
			<ul>
				<li> SuperCollider has slight differences between Windows, Mac, and Linux versions.
				<li> Current version is 3, sometimes called SuperCollider3 or SC3.
			</ul>
		</aside>
	</section>

	<section id="supercollider_basics">
		<h3>SuperCollider &mdash; The Basics</h3>
		<div style="text-align: left;">
			<ul>
				<li> SuperCollider has a client-server design, like IPython/Jupyter.
					<ul>
						<li> The client's interpreter starts automatically.
						<li> A local audio server can be started with the command
							<pre style="font-size: 32px;">
		s.boot</pre>
							where the variable "s" is reserved to represent the server.
					</ul>
				<li> Client-server synchronization uses a network protocol
					called OSC (Open Sound Control)
					and message tags with execution time in NTP format.
				<li> In the IDE: <b>Ctrl-&lt;Enter></b> = execute; &nbsp;&nbsp; <b>Ctrl-&lt;period></b> = terminate.
					<ul>
						<li> The Help Browser is easy to use, though some entries have minimal information.
					</ul>
				<li> Focus on signal processing, creating envelopes of sound,
					and combining them with a family of "pattern" classes (e.g., Pbind, Pchain, etc.).
					<ul>
						<li> Pseq: Plays array values sequentially.
						<li> Prand/Pshuf: Plays array values in random/shuffled order
						<li> Pkey: Copies sequence from a supplied key
						<li> Pbind: Gives  names to pattern result values
						<li> Pchain: Feed the output of one pattern into the input of the next
					</ul>
				<li> It's possible to emulate specific instruments, but not commonly done.
			</ul>
		</div>
	</section>

	<section id="supercollider_sinewaves">
		<h3>SuperCollider &mdash; Sine Waves</h3>
		<div style="text-align: left;">
			A (non-terminating) sine wave at 440 Hz can be played at half-volume with
			<pre style="font-size: 32px; white-space: pre-line;">
			{ SinOsc.ar(440, phase: 0, mul: 0.5, add: 0) }.play;  // Keyword args</pre>
			or
			<pre style="font-size: 32px; white-space: pre-line;">
			{ SinOsc.ar(440, 0, 0.5, 0) }.play;  // Positional args</pre>
			or just
			<pre style="font-size: 32px; white-space: pre-line;">
			{ SinOsc.ar(440) }.play;  // Omitting arguments with default values</pre>
			where "ar" is the "audio rate" constructor of the SinOsc class.
			<br/><br/>
			<p>
				UGen is the abstract superclass of all "unit generators", which represent signals.  Some examples:
			</p>
			<ul>
				<li> Impulse, a class that represents a simple sound;
				<li> LFSaw, a class that represents a low-frequency sawtooth oscillator (cf. SinOsc);
				<li> PMOsc, a class that represents a phase modulation oscillator (cf. SinOsc);
				<li> EnvGen, which wraps another signal with an "envelope";
				<li> Latch, which wraps another signal with a conditional filter.
			</ul>
		</div>
		<aside class="notes">
			All the parameters above can be omitted, which causes defaults to be used instead.
		</aside>
	</section>

	<section id="supercollider_complex">
		<h3>SuperCollider &mdash; Another Example</h3>
		<div style="text-align: left;">
		Lastly, here is a short piece that creates a cascade of random pitches
			that varies more quickly when the mouse is moved to the right-hand side of the IDE window.
		<pre style="font-size: 32px; ">
{
	var freq, latchrate, index, ratio, env, speed = 9;
	speed = MouseX.kr(2, 20);
	latchrate = speed * 1.61803399;
	index = Latch.kr(
		LFSaw.kr(latchrate, mul: 4, add: 8),
		Impulse.kr(speed)
	);
	freq = Latch.kr(
		LFSaw.kr(latchrate, mul: 36, add: 60),
		Impulse.kr(speed)
	).round(1).midicps;
	ratio = 2.01;
	env = EnvGen.kr(Env.perc(0, 2/speed), gate: Impulse.kr(speed));
	Out.ar(0, PMOsc.ar([freq, freq * 1.5],
		[freq * ratio, freq * 1.5 * ratio],
		index,
		mul: env * 0.5)
)}.play</pre>
		</div>
		<aside class="notes">
		When SC was named, the SSC had recently been cancelled by a budget cut.
		The musical language SuperCollider (SC) had a similarly grand vision
			(real-time music synthesis within a garbage-collected language),
			and its creater was skeptical of its long-term success.
		Luckily, SuperCollider has enjoyed greater success than its physics namesake.
		SuperCollider has a bunch of basic types (Integer, Float, Char, String, Symbol,
			Point, Array, Event, Function)
		</aside>
	</section>

	<section id="supercollider_overtone">
		<h3>SuperCollider &mdash; Overtone &amp; Leipzig</h3>
		<div style="text-align: left;">
			<a href="http://overtone.github.io/">Overtone</a> is a Clojure-based language
			wrapping SuperCollider,
			<a href="https://github.com/ctford/leipzig">Leipzig</a>
			is a composition lib used with Overtone, and 
			<a href="https://github.com/ctford/leipzig-template/tree/master/src/leiningen">Leiningen</a>
			is a Leipzig template library.
			Below is code from a song called 
			<a href="https://www.snip2code.com/Snippet/176938/Tuesday---written-with-Overtone-and-Leip">
			"Tuesday"</a>.
			<pre style="font-size: 32px;">
(definst metallia [freq 440 dur 1 volume 1.0]
    (-> (sin-osc freq (sin-osc 1))
	(+ (sin-osc (* 1/2 freq) (sin-osc 1/3)))
	(clip2 (mul-add (saw 1/4) 0.2 0.7))
	(* (env-gen (adsr 0.03 0.6 0.3) (line:kr 1 0 dur) :action FREE))
	(* 1/4 volume)))

(defn minor [chord] (update-in chord [:iii] (scale/from -1/2)))

(def melody
    (->>
	(phrase [2/3 13/3 5/3 9/3 1/3 2/3 13/3 2/3 13/3]
		[  1    2   1   0   0   1    2   3    0])
	(where :pitch scale/raise)
	(where :part (is :melody))))</pre>
			<p>
				See <a href="https://github.com/overtone/overtone/tree/master/src/overtone/examples">Overtone examples</a>
				for more sample code.
				Note the three distinct functions above:
			</p>
			<ul>
				<li> def &mdash; What you'd expect.  The operator "->>" is a Clojure macro.
				<li> defn &mdash; Same as def, but this adds metadata to the defined var.
				<li> definst &mdash; Defines an instrument.
			</ul>
		</div>
		<aside class="notes">
		</aside>
	</section>
</section>

<section id="section_puredata">
	<section id="puredata">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_supercollider">&#x25c1;</a>
			Pure Data (Pd) (1996 - 2014)
			<a href="#/section_strasheela">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
			<b>Brief:</b> Pd is similar to SC (soundscapes &amp; live performance), but also supports visual programming.
			<br/><br/>
			<ul>
				<li> Pd is patterned after the commercial project Max/MSP (originally by IRCAM; now sold by Cycling'74)
				<li> The user edits signal diagrams similar to circuit diagrams.
					<ul>
						<li> Subsystems can be abstracted as a Pd box with inputs and outputs. 
					</ul>
				<li> Section 4 of the book
					<a href="http://www.amazon.com/Designing-Sound-Press-Andy-Farnell/dp/0262014416">Designing Sound</a> (2010)
					explains how to make 35 different sounds, from helicopters to running water.
			</ul>
		</div>
		<aside class="notes">
			<ul>
				<li> Installation note: Pd v0.46-7 is missing an autogen.sh script referenced in INSTALLATION.txt.
				<li> Pd has separate apps called pd and pd-gui (and another called pd-watchdog). 
				<li> Performance notes:
				<ul>
					<li> On Linux: Use the -rt command-line option
					<li> On Linux with the OSS driver: Adjust audio fragments with -frags and -fragsize.
					<li> On Windows, use the ASIO driver to lower latency.
				</ul>
				<li> From Wikipedia: In 1998, a direct descendant of Max/FTS (jMax) was developed
					for Unix systems, using Java for its user interface and C for the real time part,
					and later released as open-source.
			</ul>
		</aside>
	</section>

	<section id="puredata_example">
		<h3>Pure Data (Pd) &mdash; A Simple Example</h3>
		<div style="text-align: left;">
			<ul>
				<li> A "toggle box" (marked with 'X') feeds a metronome to set a beat.
				<li> Two subsystems pick up that beat &mdash; one for each speaker.
				<li> In this diagram, both oscillators and delays have fixed values.
				<li> Message boxes &rArr; Number boxes &rArr; Signal multiplication &rArr; L &amp; R audio.
			</ul>
		</div>
		<img src="http://en.flossmanuals.net/pure-data/ch040_wireless-connections/_booki/pure-data/static/PureData-DataFlow-sendreceive1-en.png"
			width="1200"
			alt="Pure Data example"
			/>
		<aside class="notes">
			<ul>
				<li> edit mode vs. run mode
				<li> put objects on design surface
				<li> first object : dac~ [~ indicates audio write object]
				<li> Caution: If you send discontinuous signals to [*~]
					without using [line~] to smooth them out, you'll get audible clicks.
				<li> Sliders can be added to allow live control.
			</ul>
		</aside>
	</section>

	<section id="puredata_moreinfo">
		<h3>Pure Data (Pd) &mdash; More Info</h3>
		<div style="text-align: left;">
			<ul>
				<li> Recommendation: Choose Pd-Extended (or another derivative) over Pd-Vanilla.
				<li> Install <a href="http://en.flossmanuals.net/pure-data/ch047_introduction/">GEM</a>
					= "Graphics Environment for Multimedia" = plug-in library of Pd sounds
					<ul>
						<li> GEM's <a href="http://en.flossmanuals.net/pure-data/ch047_introduction/">FLOSS manual</a>,
							and
							<a href="http://gem.iem.at/documentation/faq">FAQ</a>
					</ul>
				<li> Pd computes audio in 64-sample blocks using a 3-block buffer &amp; sends to audio output.
					<ul>
						<li> This prohibits DSP loops, which would cause deadlock.
					</ul>
			</ul>
		</div>
		<br/>
		<h3>Related Language: Faust</h3>
		<div style="text-align: left;">
			<ul>
				<li> Pure Data can be extended with "externals" written in
					<a href="http://faust.grame.fr/">Faust</a>.
				<li> Faust (Functional AUdio STream) is a DSL for signal processing.
					<ul>
						<li> It's text-based, but has a GUI called Faustworks
						<li> It's block-oriented, with five composition operators
							that mirror Haskell's Arrow syntax.
					</ul>
			</ul>
			<table>
				<tr>
					<th>Faust</th>
					<th>Haskell/Arrow</th>
					<th>Meaning</th>
				</tr>
				<tr>
					<td>f ~ g</td>
					<td>&lt;See wiki page&gt;</td>
					<td>Recursive composition</td>
				</tr>
				<tr>
					<td>f , g</td>
					<td>f *** g</td>
					<td>Parallel composition</td>
				</tr>
				<tr>
					<td>f : g</td>
					<td>f >>> g</td>
					<td>Sequential composition</td>
				</tr>
				<tr>
					<td>f &lt;: g</td>
					<td>f >> ^h >>> g</td>
					<td>Split composition (with appropriate function h)</td>
				</tr>
				<tr>
					<td>f :> g</td>
					<td>f >> ^h >>> g</td>
					<td>Merge composition (with appropriate function h)</td>
				</tr>
			</table>
		</div>
		<aside class="notes">
			<ul>
				<li> Pd patches cannot run as standalone executables without the Pd binary.
				<li> On Mac OS X, Pd-Extended has a "Make app from" option
					that bundles the patch with a copy of Pd.
			</ul>
		</aside>
	</section>
</section>

<section id="section_strasheela">
	<section id="strasheela">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_puredata">&#x25c1;</a>
			Strasheela (2004 - 2012)
			<a href="#/section_resources">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
			<b>Brief:</b> Given musical constraints, compositions are found that satisfy them,
				if they're satisfiable.
			<br/><br/>
			<ul>
				<li> There are many categories of constraints (e.g., rhythmic, melodic, and harmonic).
				<li> Constraints apply to user-definable "containers".
				<li> Strasheela was Torsten Anders's dissertation project, developed through 2012.
				<li> Strasheela is implemented in the constraint-based language <b>Oz</b>
					(similar to Prolog).
					<ul>
						<li> ("Strasheela" is the name of the Scarecrow
							in the Russian version of The Wizard of Oz.)
					</ul>
				<li> The output of 
					<a href="http://strasheela.sourceforge.net/strasheela/doc/api/node6.html#entity378">
					Score.makeScore</a>
					can be rendered with a choice of formats,
					including LilyPond, Csound, SuperCollider, or Common Lisp Music (CLM).
			</ul>
		</div>
		<aside class="notes" >
			<ul>
				<li> Score constructors, score accessors, score transformers.
				<li> Predefined constraints.
				<li> Has a data type called finite domain (FD) integers.
				<li> Hasn't been worked on since 2012
			</ul>
		</aside>
	</section>

	<section id="strasheela_constraints">
		<h3>Strasheela &mdash; Constraints</h3>
		<div style="text-align: left;">
			Example of a constraint called RestrictMelodicInterval.
			(<a href="http://cmr.soc.plymouth.ac.uk/tanders/publications/TorstenAnders-MOZ2004.pdf">
			2004 paper
			</a>):
			<ul>
				<li> Consecutive notes are separated by at most a perfect fifth (= 7 semitones).
			</ul>
			<pre style="font-size: 32px;">
proc {RestrictMelodicInterval Note1}
    Note2 = {Note1 getTimeAspectPredecessor($)}
in
    7 >=: {FD.distance {Note1 getPitch($)} {Note2 getPitch($)}}
end</pre>
			And here is this rule being applied:
			<pre style="font-size: 32px;">
{MyScore
    forAll(RestrictMelodicInterval
	test:fun {$ X}
	    {X isNote($)} andthen
	    {X hasTimeAspectPredecessor($)}
    end)}
}</pre>
			A typical Strasheela program can use hundreds of variables and constraints.<br/>
			Constrait order does matter.  Usually it's Timing &rArr; Melodic &rArr; Harmonic.<br/>
			A novice user should gradually increase the number of constraints to determine impact.
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="strasheela_canons">
		<h3>Strasheela &mdash; Canons</h3>
		<div style="text-align: left;">
			A <em>canon</em> is music with 2+ voices that play time-shifted copies of the same music.<br/>
			Constraints can ensure that the copies sound harmonious together.<br/>
			Classic examples: "Row, Row, Row Your Boat" and "Frère Jacques".<br/>
			An "<em>accompanied canon</em>" has other non-repeating voices.<br/>
			<br/>
			Here's a short canon found in a few seconds by Strasheela.
			[<a href="https://raw.githubusercontent.com/tanders/strasheela/master/strasheela/examples/Output/03-FloridCounterpoint-Canon.mp3">play</a>]:
			<img src="https://raw.githubusercontent.com/tanders/strasheela/master/strasheela/examples/Output/03-FloridCounterpoint-Canon.preview.png"
				border="1"
				width="100%"
				alt="Score of sample canon"/>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="strasheela_moreinfo">
		<h3>Strasheela &mdash; Flexibility &amp; Efficiency</h3>
		<div style="text-align: left;">
			Finding solutions to a system of constraints is a standard computer programming problem.
			<br/>
			A challenge is to provide user flexibility while still running efficiently.
			<br/><br/>
			Flexibility:
			<ul>
				<li> Strasheela has many pre-defined pattern constraints.
				<li> The user can apply their own Lindenmayer system (i.e., generative grammar).
				<li> Constraints can be applied to containers, which can be nested hierarchically.
					<br/>
					One can group together different concurrent parts, or repetitions of a single voice.
					<br/>
					(But nesting of containers must be set before the search for a
					constraint solution begins.)
				<li> Constraints can be made into "soft constraints" &mdash; more like preferences.
					<br/>
					The user can prioritize rules, and 
					how many times soft constraints can be violated.
			</ul>
			<br/><br/>
			Efficiency:
			<ul>
				<li> The user can specify the "distribution" strategy to solve the
					constraint problem.
					<br/>
					Work on a sub-problem can be shut down once parameters
					are found that are good enough.
			</ul>
		</div>
		<aside class="notes">
			(Numerical) constraint examples:
			<br/><br/>
			<ul>
				<li> Largest # in a list appears only once.
				<li> All items in a list are distinct.
				<li> Container nesting: You can have a one-measure container nested inside
					a three-measure container inside a five-measure container, each with
					different constaints.
				<li> An effort is made to to determine early on that no solutions will be found
					in a particular domain, rather than searching through that domain and coming
					up empty.  (In more formal terms, constraint propagators are used to prune
					the search space.)
				<li> Strasheela allows for the use of a memory-saving technique called
					adaptive recomputation.  Unfortunately, there's not a good explanation of
					this approach outside the source code.
			</ul>
		</aside>
	</section>
</section>

<section id="section_resources">
	<section id="resources">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_strasheela">&#x25c1;</a>
			Resources
			<a href="#/appendices">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
		<p><b>Music &amp; Music Theory</b></p>
			<ul>
				<li> <a href="http://www.amazon.com/Jazz-Theory-Book-Mark-Levine/dp/1883217040">
					The Jazz Theory Book</a> (1995),
					by Mark Levine
				<li> <a href="http://postmodernjukebox.com/courses/Ragtimify.pdf">
					Ragtimify</a> (2013): a PDF on converting scores to Ragtime
				<li> <a href="https://mitpress.mit.edu/books/sweet-anticipation">
					Sweet Anticipation: Music and the Psychology of Expectation</a> (2006)
				<li> <a href="http://blog.mymusictheory.com/2014/how-to-compose-a-canon-or-round-easy-composition/">How to Compose a Canon</a> (video+text) 
				<li> Song databases: 
					<a href="http://labrosa.ee.columbia.edu/millionsong/">The Million Song Dataset</a>
						| <a href="https://www.hooktheory.com/theorytab/guide">The Theorytab database</a>
						| <a href="http://www.bandmusicpdf.org/">Band music</a>
						| <a href="http://imslp.org/wiki/">International Music Score Library Project</a>
						| <a href="http://www.gutenberg.org/browse/categories/4">Project Gutenberg</a>
				<li> <a href="http://bach.nau.edu/clavier/nature/fugues/Fugue02.html">
					Visualization of music by Bach and others
					</a>
			</ul>
		<p><b>Music Programming &amp; Analysis</b></p>
			<ul>
				<li> Cheatsheets:
					<a href="http://wiki.western.edu/mcis/index.php/Euterpea_Cheat_Sheet">Euterpea</a>
					| <a href="https://github.com/overtone/overtone/raw/master/docs/cheatsheet/overtone-cheat-sheet.pdf">Overtone</a>
					| <a href="https://puredata.info/docs/manuals/pdrefcards/pd-refcard/at_download/file">Pure Data</a>
				<li> <a href="http://soareschen.github.io/harmtrace-slides/#1">Functional
					Modelling of Musical Harmony</a>
				<li> <a href="http://theses.gla.ac.uk/2353/">Analysis
					of musical structures using monadic parser combinators</a>
				<li> <a hef="https://www.youtube.com/watch?v=Jmw6LLNQQfs">Composing (Music) in Haskell</a> [video]:
					Use of Braid Theory in Music, starting at 21:00
				<li> <a href="http://distractionandnonsense.com/sc/A_Practical_Guide_to_Patterns.pdf">A
					Practical Guide to [SuperCollider] Patterns</a>
			</ul>
		<p><b>Colophon</b></p>
			<ul>
				<li> <a href="https://github.com/hakimel/reveal.js">Documentation on reveal.js</a>,
					used to create this deck.
			</ul>
		</div>
		<aside class="notes">
			<ul>
				<li> <a href="http://www.mat.ucsb.edu/res_proj7.php">Sonification
					of the cosmic microwave background</a>
				<li> A comparison of software to convert MIDI files to scores:
					<a href="http://www.skytopia.com/project/articles/notation.html">link</a>,
					though it doesn't include
					<a href="http://midisheetmusic.sourceforge.net/">midisheetmusic</a>
				<li> Info on Stuart Popejoy's video:
					<ul>
						<li> 21:00 - 25:00: Braid theory introduction
						<li> 25:00 - 28:15: Discusses his braid programming library
						<li> 28:15 - 32:10: Applies the library to music composition
						<li> 32:10 - 36:00: Discusses a 60min, 5-piece musical composition called Pleonid 
						<li> 36:00 - 43:45: More on with braid theory
					</ul>
			</ul>
		</aside>
	</section>
</section>

<section id="section_appendices">
	<section id="appendices">
		<h2 style="background-color: #d0d0ff;">
			<a href="#/section_resources">&#x25c1;</a>
			Appendices
			<a href="#/title">&#x25b7;</a>
		</h2>
		<div style="text-align: left;">
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="appendices_apps_libraries">
		<h3>Appendix A &mdash; Apps &amp; Libraries &amp; Other</h3>
		<div style="text-align: left; font-size: 22px;">
			<table>
				<tr>
					<td><a href="http://abjad.mbrsi.org/">Abjad</td>
					<td>Python</td>
					<td>Lib</td>
					<td>Writing tonal music</td>
				</tr>
				<tr>
					<td><a href="https://en.wikipedia.org/wiki/Ableton_Live">Ableton Live</a></td>
					<td>M/P/L</td>
					<td>DAW</td>
					<td>VST (Virt. Studio Tech.) plugins</td>
				</tr>
				<tr>
					<td><a href="https://csounds.com">Csound</a></td>
					<td>M/P/L</td>
					<td>Lang</td>
					<td>Csound API;  Plugin devel w/ Cabbage &amp; JUCE</td>
				</tr>
				<tr>
					<td> <a href="http://extempore.moso.com.au/">Extempore</a> (Schemey)</td>
					<td>Mac</td>
					<td>Lang</td>
					<td>Uses LLVM for live coding, and uses IPC.</td>
				</tr>
				<tr>
					<td><a href="http://faust.grame.fr/">Faust</a></td>
					<td>M/P/L</td>
					<td>Lang</td>
					<td>Purely functional DSL for signal processing.</td>
				</tr>
				<tr>
					<td><a href="http://www.apple.com/mac/garageband/">Garageband</a></td>
					<td>Mac</td>
					<td>App</td>
					<td>Audio Unit extensions</td>
				</tr>
				<tr>
					<td><a href="http://www.humdrum.org/">Humdrum Analysis Toolkit</td>
					<td>M/P/L</td>
					<td>Toolkit</td>
					<td>Flexible with 60+ inter-related tools</td>
				</tr>
				<tr>
					<td> <a href="http://impromptu.moso.com.au/">Impromptu</a> (Schemey)</td>
					<td>Mac</td>
					<td>Lang</td>
					<td>Formerly the core of Extempore.  Focus on live coding.</td>
				</tr>
				<tr>
					<td><a href="http://www.oracle.com/technetwork/java/index-139508.html">Java Sound API</a>
						<!-- (<a href="https://docs.oracle.com/javase/tutorial/sound/">tutorial</a>) -->
					</td>
					<td>Java</td>
					<td>API</td>
					<td>Emphasizes low-level control.  Compare with the higher-level JMF.</td>
				</tr>
				<tr>
					<td><a href="https://en.wikipedia.org/wiki/Logic_Pro">Logic Pro</a></td>
					<td>Mac</td>
					<td>DAW</td>
					<td>JavaScript plugins; Audio Unit extensions</td>
				</tr>
				<tr>
					<td> <a href="https://en.wikipedia.org/wiki/Max_(software)">Max</a>(& Max/MSP)</a></td>
					<td>Mac/PC</td>
					<td>Lang</td>
					<td>
						The "lingua franca" of interactive musical performance software.
					</td>
				</tr>
				<tr>
					<td><a href="https://code.google.com/archive/p/midi-dot-net/">midi-dot-net</a></td>
					<td>.NET</td>
					<td>Lib</td>
					<td>Access to MIDI devices</td>
				</tr>
				<tr>
					<td><a href="https://musescore.org/">MuseScore</a></td>
					<td>M/P/L</td>
					<td>App</td>
					<td>JavaScript plugins</td>
				</tr>
				<tr>
					<td><a href="http://web.mit.edu/music21/">music21</a></td>
					<td>Python</td>
					<td>Lib</td>
					<td>Computational musicology; composition</td>
				</tr>
				<tr>
					<td><a href="http://naudio.codeplex.com/">NAudio</a></td>
					<td>.NET</td>
					<td>Lib</td>
					<td>Audio &amp; MIDI</td>
				</tr>
				<tr>
					<td><a href="http://naudio.codeplex.com/">Nyquist (Lispy)</a></td>
					<td>M/P/L</td>
					<td>Lang</td>
					<td>Sound effect plugins work in Audacity</td>
				</tr>
				<tr>
					<td> <a href="http://repmus.ircam.fr/openmusic/home">OpenMusic</a> (Lispy)</td>
					<td>M/P/L</td>
					<td>Lang</td>
					<td>
						Visual programming language
					</td>
				</tr>
				<tr>
					<td> <a href="http://processing.org">Processing</a></td>
					<td>M/P/L</td>
					<td>Lang</td>
					<td>
						Java-based educational multimedia programming lang
					</td>
				</tr>
				<tr>
					<td><a href="https://puredata.info/">Pure Data</a></td>
					<td>M/P/L</td>
					<td>Lang</td>
					<td>Plugin frameworks:
						<a href="http://pure-data.sourceforge.net/old/documentation.php#plugin~">plugin~</a>/
						<a href="http://bitbucket.org/moumar/ladspa/wiki/Home">ladspa~</a>/
						<a href="http://puredata.info/Members/jb/">dssi~</a>.
						Externals create new primitives.
					</td>
				</tr>
				<tr>
					<td> <a href="https://en.wikipedia.org/wiki/Reaktor">Reaktor</a></td>
					<td>Mac/PC</td>
					<td>Synth</td>
					<td>A modular synthesizer</td>
				</tr>
				<tr>
					<td><a href="http://www.reaper.fm/">Reaper</a></td>
					<td>M/P/L</td>
					<td>DAW</td>
					<td>Plugins and extensions</td>
				</tr>
				<tr>
					<td><a href="https://www.staffpad.net/">StaffPad</a></td>
					<td>PC</td>
					<td>App</td>
					<td>Imports/exports MusicXML and MIDI</td>
				</tr>
				<tr>
					<td><a href="http://www.audiosynth.com/">SuperCollider</a></td>
					<td>M/P/L</td>
					<td>Lang</td>
					<td>"Quarks" extend lang; plugins extend server</td>
				</tr>
			</table>
		</div>
		<aside class="notes">
			<ul>
				<li> See Wikipedia's
					<a href="https://en.wikipedia.org/wiki/Comparison_of_audio_synthesis_environments">
						list of audio synthesis environments</a>
				<li> Comparison between Extempore and Overtone
					<a href="https://www.quora.com/Music-Programming-What-are-the-differences-in-design-between-Overtone-and-Extempore-and-what-are-their-consequences">here</a>.
				<li> Music esolangs:
					<a href="http://esolangs.org/wiki/Bitoven">Bitoven</a>,
					<a href="https://esolangs.org/wiki/Musical_notes">Musical notes</a>,
					<a href="https://esolangs.org/wiki/Musical-X">Musical-X</a>,
					<a href="http://esolangs.org/wiki/Velato">Volato (uses MIDI files as source code)</a>
			</ul>
		</aside>
	</section>

	<section id="appendices_bestpractices">
		<h3>Appendix B &mdash; Best Practices &amp; Cautions</h3>
		<div style="text-align: left;">
		<ul>
			<li> Volume.
				<ul>
					<li> Programs that don't explicitly set volume might by default
						play at the loudest possible volume.
					<li> Sudden changes in soundscape volume can result in clicks.
						These can be resolved by adding envelopes to modulate the volume.
				</ul>
			<li> Note that pitch numbering starts at C in each octave, not A.
				<ul>
					<li> For example, the pitch one semitone below C4 is not B4, but B3.
				</ul>
			<li> The MIDI file format has fixed-range values.
				For example, MIDI notes range from 0 to 127, which can fit in 7 bits.
				If, say, as the result of a transposition, a note is given a value above 127,
				it will be truncated, and result in a lower pitch than expected.
			<li> This presentation was made using reveal.js.
				If you want to attempt to modify the vertical placement of slides
				on a reveal.js presentation, take a look at the layout() function in reveal.js.
		</ul>
		</div>
		<aside class="notes">
		</aside>
	</section>

	<section id="appendices_choosing">
		<h3>Appendix C &mdash; Choosing a Music Programming Language</h3>
		<div style="text-align: left;">
		If you just want to compose music, an app (e.g., MuseScore) might be right for you.
		<br/><br/>
		Here are some guidelines on which language to choose.
		<table>
			<tr><th>Language/Library</th>
				<th>Considerations</th>
			</tr>
			<tr><td>Euterpea</td>
				<td>
					<ul>
						<li> Benefits of pure functional programming.
						<li> Integration of tonal and soundscape music.
						<li> Haskell
							<a href="https://wiki.haskell.org/Applications_and_libraries/Music_and_sound">APIs</a>
							for Csound, SuperCollider, OpenAL/ALUT.
						<li> Does not support live performance (but see Tidal &amp; Conductive)
					</ul>
				</td>
			</tr>
			<tr><td>Csound</td>
				<td>
					<ul>
						<li> Compiler-level compatibility, due to being written in C
						<li> Inherited legacy code?
					</ul>
				</td>
			</tr>
			<tr><td>Chuck</td>
				<td>
					<ul>
						<li> Good support for synchronization &amp; instrument modeling
						<li> Open source libs LiCK and Chuckery support better musical expressiveness.
					</ul>
				</td>
			</tr>
			<tr><td>Pure Data</td>
				<td>If it's important to choose a visual programming language</td>
			</tr>
			<tr><td>SuperCollider</td>
				<td>
					<ul>
						<li> Smalltalk-like syntax
						<li> Preferred by some over Csound and Pure Data.
					</ul>
				</td>
			</tr>
			<tr><td>Strasheela</td>
				<td>Support for constraint-based composition</td>
			</tr>
		</table>
		</div>
		<aside class="notes">
		</aside>
	</section>
</section>

</div> <!-- slides -->
</div> <!-- reveal -->

<script>
	// Full list of configuration options available at:
	// https://github.com/hakimel/reveal.js#configuration
	Reveal.initialize({
		controls: true,
		progress: true,
		history: true,
		center: true,
		transition: 'slide', // none/fade/slide/convex/concave/zoom

		// JMC
		width: 1600,
		height: 1000,
		margin: 0.05,
		rollingLinks: true,
		slideNumber: true,

		// Optional reveal.js plugins
		dependencies: [
			{ src: 'js/classList.js', condition: function() { return !document.body.classList; } },
			{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
			{ src: 'plugin/zoom-js/zoom.js', async: true },
			{ src: 'plugin/notes/notes.js', async: true }
		]
	});
</script>
</body>
</html>

<!-- Euterpea notes:
			<pre sytle="font-size: 32px;">
			playA :: (ToMusic1 a, Control.DeepSeq.NFData a)
					=> PMap Note1 -> Context Note1 -> Music a -> IO ()
					(This calls playC)
			playC :: (ToMusic1 a, Control.DeepSeq.NFData a)
					=> PlayParams -> Music a -> IO ()
					(This calls playStrict or playInf)
			playStrict :: (ToMusic1 a, NFData a)
					=> PlayParams -> Music a -> IO ()
			playStrict p m = m `deepseq`
				let x = toMidi (perfAlg p $ toMusic1 m)
				in x `deepseq` playM' (devID p) x
					(So this calls toMusic1, toMidi, and playM')
			toMusic1 :: Music a -> Music1
				has instances for: Pitch, (Pitch, Volume), Note1, AbsPitch
			toMidi:: [MEvent] -> Midi
			toMidi = toMidiUPM defUpm
			toMidiUPM :: UserPatchMap -> [MEvent] -> Midi
			playM' :: Maybe OutputDeviceID -> Midi -> IO ()
					(This calls playMidi)
			data Midi = Midi { fileType :: FileType}
							 , timeDiv :: TimeDiv
							 , tracks :: [Track Ticks]
							 }
			playMidi :: OutputDeviceID -> Midi -> IO ()
			type MidiEvent = (Time, MidiMessage)
			data MidiMessage = ANote { channel :: !Channel
									 , key :: !Key
									 , velocity :: !Velocity
									 , duration :: !Time
									 }
							 | Std Message
			type MidiEvent = (Time, MidiMessage)
			</pre>
-->

<!-- reveal.js notes:
	Setting up reveal.js:
		http://htmlcheats.com/reveal-js/reveal-js-tutorial-reveal-js-for-beginners/
	Code formatting:
		<pre><code class="hljs" data-trim contenteditable>
		</code></pre>
	Fragments:
		<p class="fragment">one fragment</p>
		<span class="fragment">another</span>
	JavaScript API:
		https://github.com/hakimel/reveal.js#api
	Links to other slides:
		<section id="languages">
		<a href="#/languages">like this</a>
	Markdown:
		Guidelines for reveal.js at https://github.com/hakimel/reveal.js#markdown
		<section data-markdown>
			<script type="text/template">
	Quote templates
		Inline: <q cite="http://foo/bar/baz.html">&ldquo; Lorem ipsum &rdquo;</q>
		Blockquote:
			<blockquote cite="http://foo/bar/baz.html">
				&ldquo; Lorem ipsum .&rdquo;
			</blockquote>
	State:
		Global state:
			Setting data-state="foo" on a slide => "foo" is added as a class to the doc element on open.
		Events:
			See documentation.
	Style changes
		style="font-size: 72px;"
-->
